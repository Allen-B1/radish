<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game | Radish</title>
    <script type="module" crossorigin>var Ke=Object.defineProperty;var Qe=(e,t,r)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ge=(e,t,r)=>Qe(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const y of s.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&n(y)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function ye(){}function We(e){return e()}function Oe(){return Object.create(null)}function ae(e){e.forEach(We)}function He(e){return typeof e=="function"}function Ze(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function $e(e){return Object.keys(e).length===0}const et=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function B(e,t){e.appendChild(t)}function Q(e,t,r){e.insertBefore(t,r||null)}function R(e){e.parentNode&&e.parentNode.removeChild(e)}function tt(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function W(e){return document.createElement(e)}function te(e){return document.createTextNode(e)}function z(){return te(" ")}function rt(){return te("")}function pe(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function q(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function st(e){return Array.from(e.childNodes)}function he(e,t){t=""+t,e.data!==t&&(e.data=t)}function ve(e,t,r,n){r==null?e.style.removeProperty(t):e.style.setProperty(t,r,"")}function we(e,t,r){e.classList.toggle(t,!!r)}let xe;function me(e){xe=e}const oe=[],Ee=[];let ie=[];const Ce=[],lt=Promise.resolve();let Le=!1;function nt(){Le||(Le=!0,lt.then(Xe))}function Se(e){ie.push(e)}const _e=new Set;let le=0;function Xe(){if(le!==0)return;const e=xe;do{try{for(;le<oe.length;){const t=oe[le];le++,me(t),ot(t.$$)}}catch(t){throw oe.length=0,le=0,t}for(me(null),oe.length=0,le=0;Ee.length;)Ee.pop()();for(let t=0;t<ie.length;t+=1){const r=ie[t];_e.has(r)||(_e.add(r),r())}ie.length=0}while(oe.length);for(;Ce.length;)Ce.pop()();Le=!1,_e.clear(),me(e)}function ot(e){if(e.fragment!==null){e.update(),ae(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Se)}}function it(e){const t=[],r=[];ie.forEach(n=>e.indexOf(n)===-1?t.push(n):r.push(n)),r.forEach(n=>n()),ie=t}const at=new Set;function ct(e,t){e&&e.i&&(at.delete(e),e.i(t))}function je(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ft(e,t,r){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,r),Se(()=>{const s=e.$$.on_mount.map(We).filter(He);e.$$.on_destroy?e.$$.on_destroy.push(...s):ae(s),e.$$.on_mount=[]}),i.forEach(Se)}function ut(e,t){const r=e.$$;r.fragment!==null&&(it(r.after_update),ae(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function dt(e,t){e.$$.dirty[0]===-1&&(oe.push(e),nt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function pt(e,t,r,n,i,s,y=null,g=[-1]){const v=xe;me(e);const l=e.$$={fragment:null,ctx:[],props:s,update:ye,not_equal:i,bound:Oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(v?v.$$.context:[])),callbacks:Oe(),dirty:g,skip_bound:!1,root:t.target||v.$$.root};y&&y(l.root);let E=!1;if(l.ctx=r?r(e,t.props||{},(w,f,...o)=>{const b=o.length?o[0]:f;return l.ctx&&i(l.ctx[w],l.ctx[w]=b)&&(!l.skip_bound&&l.bound[w]&&l.bound[w](b),E&&dt(e,w)),f}):[],l.update(),E=!0,ae(l.before_update),l.fragment=n?n(l.ctx):!1,t.target){if(t.hydrate){const w=st(t.target);l.fragment&&l.fragment.l(w),w.forEach(R)}else l.fragment&&l.fragment.c();t.intro&&ct(e.$$.fragment),ft(e,t.target,t.anchor),Xe()}me(v)}class ht{constructor(){ge(this,"$$");ge(this,"$$set")}$destroy(){ut(this,1),this.$destroy=ye}$on(t,r){if(!He(r))return ye;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!$e(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const mt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(mt);function ne(e){return e.type=="army"?e.data:e.data[0]}const Pe={fall:"Fall",fall_retreat:"Fall",spring:"Spring",spring_retreat:"Spring",winter:"Winter"};function yt(e){let t=e.split("-"),r=Number(t[1]);switch(t[0]){case"spring":return`spring_retreat-${r}`;case"spring_retreat":return`fall-${r}`;case"fall":return`fall_retreat-${r}`;case"fall_retreat":return`winter-${r}`;case"winter":return`spring-${r+1}`}throw new Error("unknown phase: "+e)}function T(e){let t=e.split("-"),r=Number(t[1]);switch(t[0]){case"spring":return`winter-${r-1}`;case"spring_retreat":return`spring-${r}`;case"fall":return`spring_retreat-${r}`;case"fall_retreat":return`fall-${r}`;case"winter":return`fall_retreat-${r}`}throw new Error("unknown phase: "+e)}function Ae(e,t,r){let n=r(e);return ee(n)&&(!t[T(n)]||Object.keys(t[T(n)].retreats).length==0)?Ae(n,t,r):n}function wt(e,t){return Ae(e,t,yt)}function gt(e,t){return Ae(e,t,T)}function vt(e){return e.split("-")[0]=="winter"}function ee(e){return e.split("-")[0].endsWith("retreat")}const{window:be}=et;function ke(e){const t=e.slice(),r=Number(t[1].split("-")[1]);return t[33]=r,t}function Ve(e,t,r){const n=e.slice();return n[34]=t[r],n}function Me(e){let t,r;return{c(){t=W("span"),q(t,"style",r="background:"+e[0].powers[e[34][0]].sc_color),q(t,"class","power-color svelte-1x41qvy")},m(n,i){Q(n,t,i)},p(n,i){i[0]&257&&r!==(r="background:"+n[0].powers[n[34][0]].sc_color)&&q(t,"style",r)},d(n){n&&R(t)}}}function Ie(e){let t,r,n,i=e[34][1]+"",s,y,g=e[34][0]&&Me(e);return{c(){t=W("div"),g&&g.c(),r=z(),n=W("span"),s=te(i),y=z(),q(n,"class","power-name svelte-1x41qvy"),q(t,"class","player svelte-1x41qvy"),we(t,"me",e[34][0]==e[9])},m(v,l){Q(v,t,l),g&&g.m(t,null),B(t,r),B(t,n),B(n,s),B(t,y)},p(v,l){v[34][0]?g?g.p(v,l):(g=Me(v),g.c(),g.m(t,r)):g&&(g.d(1),g=null),l[0]&256&&i!==(i=v[34][1]+"")&&he(s,i),l[0]&768&&we(t,"me",v[34][0]==v[9])},d(v){v&&R(t),g&&g.d()}}}function De(e){let t,r,n,i,s,y=Pe[e[1].split("-")[0]]+"",g,v,l="'"+(e[33]<10?"0"+e[33]:e[33]),E,w,f=ee(e[1])?"retreats":"",o,b,u,j,M,O,x=e[1]==e[2]&&Je(e);return{c(){t=W("div"),r=W("button"),r.textContent="<",n=z(),i=W("div"),s=W("div"),g=te(y),v=z(),E=te(l),w=z(),o=te(f),b=z(),x&&x.c(),u=z(),j=W("button"),j.textContent=">",q(r,"class","svelte-1x41qvy"),q(s,"id","phase"),q(s,"class","svelte-1x41qvy"),ve(i,"display","flex"),ve(i,"flex-direction","column"),ve(i,"justify-content","center"),q(i,"class","svelte-1x41qvy"),q(j,"class","svelte-1x41qvy"),q(t,"class","panel svelte-1x41qvy"),q(t,"id","phase-panel")},m(h,k){Q(h,t,k),B(t,r),B(t,n),B(t,i),B(i,s),B(s,g),B(s,v),B(s,E),B(s,w),B(s,o),B(i,b),x&&x.m(i,null),B(t,u),B(t,j),M||(O=[pe(r,"click",e[25]),pe(j,"click",e[26])],M=!0)},p(h,k){k[0]&2&&y!==(y=Pe[h[1].split("-")[0]]+"")&&he(g,y),k[0]&2&&l!==(l="'"+(h[33]<10?"0"+h[33]:h[33]))&&he(E,l),k[0]&2&&f!==(f=ee(h[1])?"retreats":"")&&he(o,f),h[1]==h[2]?x?x.p(h,k):(x=Je(h),x.c(),x.m(i,null)):x&&(x.d(1),x=null)},d(h){h&&R(t),x&&x.d(),M=!1,ae(O)}}}function Je(e){let t,r=Te(e[10]-e[12])+"",n,i;return{c(){t=W("div"),n=te(r),i=te(" left"),q(t,"id","adj-time"),q(t,"class","svelte-1x41qvy")},m(s,y){Q(s,t,y),B(t,n),B(t,i)},p(s,y){y[0]&5120&&r!==(r=Te(s[10]-s[12])+"")&&he(n,r)},d(s){s&&R(t)}}}function _t(e){let t,r,n,i,s,y,g,v,l,E=je(e[8]),w=[];for(let o=0;o<E.length;o+=1)w[o]=Ie(Ve(e,E,o));let f=e[1]&&De(ke(e));return{c(){t=W("div"),r=z(),n=W("div"),i=W("h3"),i.textContent="Players",s=z();for(let o=0;o<w.length;o+=1)w[o].c();y=z(),f&&f.c(),g=rt(),q(t,"id","map"),q(t,"class","svelte-1x41qvy"),we(t,"show-coast",e[2]&&e[6]&&e[3]&&e[6][e[3]]&&(e[11]=="move"&&e[6][e[3]].type=="fleet"||e[4]&&e[6][e[4]]&&e[6][e[4]].type=="fleet")),q(i,"class","svelte-1x41qvy"),q(n,"class","panel svelte-1x41qvy"),q(n,"id","players")},m(o,b){Q(o,t,b),e[24](t),Q(o,r,b),Q(o,n,b),B(n,i),B(n,s);for(let u=0;u<w.length;u+=1)w[u]&&w[u].m(n,null);Q(o,y,b),f&&f.m(o,b),Q(o,g,b),v||(l=[pe(be,"load",e[13]),pe(be,"keydown",e[14]),pe(be,"keyup",e[15])],v=!0)},p(o,b){if(b[0]&2140&&we(t,"show-coast",o[2]&&o[6]&&o[3]&&o[6][o[3]]&&(o[11]=="move"&&o[6][o[3]].type=="fleet"||o[4]&&o[6][o[4]]&&o[6][o[4]].type=="fleet")),b[0]&769){E=je(o[8]);let u;for(u=0;u<E.length;u+=1){const j=Ve(o,E,u);w[u]?w[u].p(j,b):(w[u]=Ie(j),w[u].c(),w[u].m(n,null))}for(;u<w.length;u+=1)w[u].d(1);w.length=E.length}o[1]?f?f.p(ke(o),b):(f=De(ke(o)),f.c(),f.m(g.parentNode,g)):f&&(f.d(1),f=null)},i:ye,o:ye,d(o){o&&(R(t),R(r),R(n),R(y),R(g)),e[24](null),tt(w,o),f&&f.d(o),v=!1,ae(l)}}}const de="http://www.w3.org/2000/svg";function Te(e){let t=Math.floor(e/1e3),r=Math.floor(t/60),n=t%60;return r?r+"m"+n+"s":n+"s"}function bt(e,t,r){let n,i,s,y,g=[],v="",l=null,E=null,w=0,f=null,o=null,b="move",u={};function j(L,P){return l==null?L:(P||(P=O[l]&&O[l].units[L]),P&&P.type=="fleet"&&P.data[1]!=""?L+"-"+P.data[1]:L)}let M=u,O={},x={},h={},k={},_;function H(L){return L*_.viewBox.baseVal.width+_.viewBox.baseVal.x}function X(L){return L*_.viewBox.baseVal.height+_.viewBox.baseVal.y}function Be(L,P,A,d){var re;let p=_.getBoundingClientRect(),a=document.getElementById(P+"-"+L),c=a.cloneNode(!0);c.removeAttribute("id"),c.classList.add("unit");let m=a.getBoundingClientRect(),I=m.left+m.width/2+window.scrollX,Z=m.top+m.height/2+window.scrollY,N=H(I/p.width),S=X(Z/p.height),D=H(A/s.width),$=X(d/s.height);return c.setAttribute("transform","translate("+(D-N)+","+($-S)+") "+c.getAttribute("transform")),(re=a.parentNode)==null||re.appendChild(c),c}let Y=null;async function Ye(){let L=location.pathname.split("/")[2],P=JSON.parse(await(await fetch("/games/"+L+"/meta.json")).text()),A=await(await fetch("/variants/"+P.variant+"/map.svg")).text();r(7,n.innerHTML=A,n),r(16,i=JSON.parse(await(await fetch("/variants/"+P.variant+"/adj.json")).text())),r(17,s=JSON.parse(await(await fetch("/variants/"+P.variant+"/pos.json")).text())),r(0,y=JSON.parse(await(await fetch("/variants/"+P.variant+"/meta.json")).text())),r(22,_=n.querySelector("svg")),r(22,_.innerHTML+=`  <defs>
    <!-- A marker to be used as an arrowhead -->
    <marker
      id="arrow"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="${16/s.width*_.viewBox.baseVal.width}"
      markerHeight="${16/s.width*_.viewBox.baseVal.width}"
      orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#000" />
    </marker>
    <marker
      id="arrow-fail"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="${16/s.width*_.viewBox.baseVal.width}"
      markerHeight="${16/s.width*_.viewBox.baseVal.width}"
      orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" class="arrow-fail" />
    </marker>
    <marker
      id="arrow-retreat"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="${16/s.width*_.viewBox.baseVal.width}"
      markerHeight="${16/s.width*_.viewBox.baseVal.width}"
      orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" class="arrow-retreat" />
    </marker>
  </defs>`,_);var d=document.createElement("style");d.textContent=`
        .order { stroke-width: ${4*_.viewBox.baseVal.width/s.width} }
        .support { stroke-dasharray: ${4*_.viewBox.baseVal.width/s.width} }
        .convoy { stroke-dasharray: ${16*_.viewBox.baseVal.width/s.width} ${4*_.viewBox.baseVal.width/s.width} }
        `,document.getElementsByTagName("head")[0].appendChild(d);for(let a in i.provinces)for(let c of[""].concat(i.provinces[a].coasts)){let m=a+(c?"-"+c:""),I=_.querySelector("#"+m);if(I)I.classList.add("tile");else{let Z=H(s.provinces[m].x/s.width),N=X(s.provinces[m].y/s.height),S=document.createElementNS(de,"circle");S.id=a,S.setAttribute("cx",Z+""),S.setAttribute("cy",N+""),S.setAttribute("r",String(24*_.viewBox.baseVal.height/s.height)),S.classList.add("tile","added"),c!=""&&S.classList.add("coast"),S.id=m,_.appendChild(S),I=S}I.addEventListener("click",Z=>{if(!(E==null||E!=l))if(ee(E)&&h[T(E)]){console.log("retreat");let N=h[T(E)].retreats;r(11,b="move"),f==null?N[a]&&ne(N[a].src)==v&&r(3,f=a):f==a?r(3,f=r(4,o=null)):N[f]&&N[f].dest.filter(([S,D])=>S==a&&D==c).length!=0?r(18,u[f]={type:"move",dest:[a,c]},u):N[f]&&console.log(N[f].dest.filter(([S,D])=>S==a&&D==c),N[f].dest)}else vt(E)||(f==null?k&&k[a]&&ne(k[a])==v&&r(3,f=a):o==null&&(ce.s||ce.c)?(r(4,o=a),r(11,b=ce.s?"support":"convoy")):(b=="move"?f!=a?r(18,u[f]={type:"move",dest:[a,c]},u):r(18,u[f]={type:"hold"},u):(b=="convoy"||b=="support")&&o&&o!=a?(r(18,u[f]={type:b=="convoy"?"convoy":"support_move",src:o,dest:a},u),k&&k[o]&&ne(k[o])==v&&r(18,u[o]={type:"move",dest:[a,c]},u)):b=="support"&&o&&o==a&&(r(18,u[f]={type:"support_hold",target:a},u),(!u[a]||u[a].type=="move")&&r(18,u[a]={type:"hold"},u)),r(3,f=r(4,o=null)),r(11,b="move")))})}let p=Array.from(document.querySelectorAll("[id^=fleet-]")).concat(Array.from(document.querySelectorAll("[id^=army-]")));for(let a of p)a.classList.add("unit");r(6,k),r(1,l),r(20,O),r(23,Y=new WebSocket("/games/"+L+"/ws")),r(23,Y.onopen=()=>{let a=new Map(document.cookie.split(";").map(c=>c.trim().split("="))).get("token");Y.send(JSON.stringify({type:"auth",token:a}))},Y),r(23,Y.onmessage=a=>{let c=JSON.parse(a.data);switch(c.type){case"game_info":r(9,v=c.power);break;case"update_players":r(8,g=c.players);break;case"map_state":{let m=`${c.phase}-${c.year}`;r(20,O[m]=c.state,O);break}case"phase":{let m=`${c.phase}-${c.year}`;r(20,O[m]=c.state,O),l||r(1,l=m),r(18,u={}),r(2,E=m),r(10,w=c.adj_time);break}case"error":{console.error(c.msg);break}case"movement_adj":{let m=`${c.phase}-${c.year}`;r(21,x[m]=c.orders,x),r(5,h[m]=h[m]||{retreat_orders:{}},h),r(5,h[m].order_status=c.order_status,h),r(5,h[m].retreats=c.retreats,h);break}case"build_adj":{`${c.phase}${c.year}`,c.builds;break}case"retreat_adj":{let m=`${c.phase}-${c.year}`;r(21,x[m]=c.orders,x);break}}},Y)}let Ne=Date.now();setInterval(()=>{r(12,Ne=Date.now())},1e3);let ce={};function Re(L){ce[L.key]=!0}function ze(L){ce[L.key]=!1}function Fe(L){Ee[L?"unshift":"push"](()=>{n=L,r(7,n)})}const Ue=()=>{l&&r(1,l=gt(l,h))},Ge=()=>{l&&r(1,l=wt(l,h))};return e.$$.update=()=>{var L,P;if(e.$$.dirty[0]&2&&r(3,f=r(4,o=null)),e.$$.dirty[0]&8){let A=document.querySelectorAll(".prov-active");for(let d of A)d.classList.remove("prov-active");f&&((L=document.getElementById(f))==null||L.classList.add("prov-active"))}if(e.$$.dirty[0]&16){let A=document.querySelectorAll(".prov-active-2");for(let d of A)d.classList.remove("prov-active-2");o&&((P=document.getElementById(o))==null||P.classList.add("prov-active-2"))}if(e.$$.dirty[0]&2359302&&r(19,M=l==E?u:l&&x[l]||{}),e.$$.dirty[0]&5898274){document.querySelectorAll(".order").forEach(d=>d.remove());let A=l&&h[l]&&h[l].order_status||null;for(let d in M){let p=M[d];switch(p.type){case"move":{let F=j(d);l&&ee(l)&&h[T(l)]&&d in h[T(l)].retreats&&(F=j(d,h[T(l)].retreats[d].src));let se=p.dest[0]+(p.dest[1]?"-"+p.dest[1]:""),J=s.provinces[F].x,C=s.provinces[F].y,U=s.provinces[se].x,G=s.provinces[se].y;l&&O[l].units[d]&&ee(l)&&(J+=16,C+=8);let K=Math.sqrt((J-U)**2+(C-G)**2),ue=Math.max(K*.5,K-16);U=J+ue/K*(U-J),G=C+ue/K*(G-C);let V=document.createElementNS(de,"line");V.classList.add("order","move"),V.setAttribute("x1",H(J/s.width)+""),V.setAttribute("y1",X(C/s.height)+""),V.setAttribute("x2",H(U/s.width)+""),V.setAttribute("y2",X(G/s.height)+""),A&&A[d]!=!0?V.classList.add("fail"):l&&ee(l)&&V.classList.add("retreat"),_.appendChild(V);break}case"support_hold":{let F=j(d),se=j(p.target),J=s.provinces[F].x,C=s.provinces[F].y,U=s.provinces[se].x,G=s.provinces[se].y,K=Math.sqrt((J-U)**2+(C-G)**2),ue=Math.max(K*.5,K-16);U=J+ue/K*(U-J),G=C+ue/K*(G-C);let V=document.createElementNS(de,"line");V.classList.add("order","support"),V.setAttribute("x1",H(J/s.width)+""),V.setAttribute("y1",X(C/s.height)+""),V.setAttribute("x2",H(U/s.width)+""),V.setAttribute("y2",X(G/s.height)+""),A&&A[d]!=!0&&V.classList.add("fail"),_.appendChild(V);break}case"hold":{let F=j(d),se=s.provinces[F].x,J=s.provinces[F].y,C=document.createElementNS(de,"circle");C.setAttribute("cx",""+H(se/s.width)),C.setAttribute("cy",""+X(J/s.height)),C.setAttribute("r",""+28/s.width*_.viewBox.baseVal.height),C.classList.add("order","hold"),A&&A[d]!=!0&&C.classList.add("retreat"),_.appendChild(C);break}case"support_move":case"convoy":let a=j(d),c=j(p.src),m=p.dest;M[p.src]&&M[p.src].type=="move"&&M[p.src].dest[1]&&(m+="-"+M[p.src].dest[1]),console.log(m,M);let I=s.provinces[a].x,Z=s.provinces[a].y,N=s.provinces[c].x,S=s.provinces[c].y,D=s.provinces[m].x,$=s.provinces[m].y,re=Math.sqrt((N-D)**2+(S-$)**2),qe=Math.max(re*.5,re-16);D=N+qe/re*(D-N),$=S+qe/re*($-S),I=H(I/s.width),N=H(N/s.width),D=H(D/s.width),Z=X(Z/s.height),S=X(S/s.height),$=X($/s.height);let fe=document.createElementNS(de,"path");fe.classList.add("order"),fe.classList.add(p.type=="convoy"?"convoy":"support"),fe.setAttribute("d",`M ${I} ${Z} C ${N} ${S}, ${N} ${S}, ${D} ${$}`),A&&A[d]!=!0&&fe.classList.add("fail"),_.appendChild(fe);break}}}if(e.$$.dirty[0]&1048578&&(l&&O[l]?r(6,k=O[l].units):r(6,k={})),e.$$.dirty[0]&1114115&&l&&O[l]&&y){let A=O[l].ownership,d=O[l].units;for(let p in i.provinces){if(i.provinces[p].is_sea)continue;let a=document.getElementById(p);if(!a)continue;let c=document.getElementById("sc-"+p),m=A[p];if(!y.provinces[p].is_sc&&d[p]&&(m=ne(d[p])),m){let I=y.powers[m];a.style.fill=I.tile_color,c&&(c.style.fill=I.sc_color)}else a.style.fill=y.data.land_color,c&&(c.style.fill=y.data.land_color)}}if(e.$$.dirty[0]&4325474){let A=Array.from(document.getElementsByClassName("unit"));for(let d of A)d.remove();if(_){for(let d in k){let p;k[d].type=="army"?p=s.provinces[d]:p=s.provinces[d+(k[d].data[1]?"-"+k[d].data[1]:"")],Be(k[d].type,ne(k[d]),p.x,p.y)}if(l&&ee(l)&&h[T(l)]){console.log("drawing retreats",h[T(l)].retreats);for(let d in h[T(l)].retreats){let p=h[T(l)].retreats[d].src,a;p.type=="army"?a=s.provinces[d]:a=s.provinces[d+(p.data[1]?"-"+p.data[1]:"")],k[d]&&(a=Object.assign({},a),a.x+=16,a.y+=8),Be(p.type,ne(p),a.x,a.y).classList.add("retreat")}}}}e.$$.dirty[0]&8650752&&Y!=null&&Y.readyState==WebSocket.OPEN&&Y.send(JSON.stringify({type:"orders",orders:u}))},[y,l,E,f,o,h,k,n,g,v,w,b,Ne,Ye,Re,ze,i,s,u,M,O,x,_,Y,Fe,Ue,Ge]}class kt extends ht{constructor(t){super(),pt(this,t,bt,_t,Ze,{},null,[-1,-1])}}new kt({target:document.getElementById("app")});
</script>
    <style rel="stylesheet" crossorigin>body{font-family:Arial,sans-serif;font-size:16px;padding:0;margin:0;background:#171a1c;color:#fff}a{color:#3986ac}a:visited{color:#8c53c6}.block{padding:16px;border-radius:0;background:#22282a}.block>:first-child{margin-top:0}.block>:last-child{margin-bottom:0}h3{margin:0 0 8px;font-size:20px}header{background:#ac3973;color:#fff;display:flex;align-items:center;flex-direction:row;padding:8px 16px}header h2{margin:4px 0;flex-grow:1;font-size:22px}header a,header a:visited,header a:active{color:#fff;text-decoration:none}header>*:not(:last-child){margin-right:16px}main{padding:16px;max-width:1024px;margin:16px auto auto}h1{margin-top:0;font-size:28px;text-align:center}.button,button,::file-selector-button{border:0;background:#ac3973;color:#fff!important;text-decoration:none!important;cursor:pointer;display:inline-block;padding:4px 8px;border-radius:0;font-size:15px}input[type=color]{background:transparent;border:0;cursor:pointer;padding:0}input[type=color]:active{filter:brightness(75%)}::-moz-color-swatch,::-webkit-color-swatch{border:0}.input{color:#fff;padding:4px 8px;border:2px solid hsla(0,0%,50%,.5);background:transparent}.input::placeholder{color:#ffffff80}.input:focus{border-color:#ac3973;outline:none}.button:active,button:active,::file-selector-button:active{background:#8a2859}.button.accent,button.accent{background:#62a63f}.button.accent:active,button.accent:active{background:#4c8131}.panel-2{display:flex;flex-direction:row;align-items:flex-start}@media (max-width: 720px){.panel-2{flex-direction:column;align-items:stretch}}.g_id_signin div{border-radius:0!important}.folder{display:block}.folder-title{display:block;color:#fff!important;background:#22282a;padding:8px 16px;text-decoration:none}.folder-content{background:#191d1f;padding:16px;display:none}.folder-content>:first-child{margin-top:0}.folder:target>.folder-content{display:block}.folder:target>.folder-title{background:#ac3973}.tile{cursor:pointer}.tile.added{z-index:10;fill:#00000013}.tile.added.prov-active{fill:#0003}.tile.added.prov-active-2{fill:#f003}.tile.prov-active{filter:brightness(80%)}.tile.prov-active-2{filter:brightness(80%) hue-rotate(90deg)}.panel.svelte-1x41qvy.svelte-1x41qvy{position:fixed;top:16px;left:16px;background:#161b1d;padding:16px}.panel.svelte-1x41qvy h3.svelte-1x41qvy{margin-top:0;text-align:center}.player.svelte-1x41qvy.svelte-1x41qvy{display:flex;align-items:center;flex-direction:row}.power-color.svelte-1x41qvy.svelte-1x41qvy{width:8px;height:32px;display:inline-block;margin-right:8px}.power-name.svelte-1x41qvy.svelte-1x41qvy{flex-grow:1}.me.svelte-1x41qvy .power-name.svelte-1x41qvy{font-weight:700}#phase-panel.svelte-1x41qvy.svelte-1x41qvy{left:50%;transform:translate(-50%);display:flex;flex-direction:row;min-width:256px;padding:0}#phase-panel.svelte-1x41qvy button.svelte-1x41qvy{padding:8px 16px;font-size:32px;background:transparent}#phase-panel.svelte-1x41qvy button.svelte-1x41qvy:active{background:#00000080}#phase-panel.svelte-1x41qvy>div.svelte-1x41qvy{text-align:center;flex-grow:1;margin:0 4px}#phase.svelte-1x41qvy.svelte-1x41qvy{font-size:20px}body{background:#fff}.svelte-1x41qvy:not(.show-coast) .coast{display:none}.order{fill:transparent;pointer-events:none;z-index:11}.hold.order{--arrow-color:#000;stroke:#000}.move.order{stroke:#000;marker-end:url(#arrow)}.convoy.order{stroke:#2d2d86}.support{z-index:12;stroke:#000}.order.fail{marker-end:url(#arrow-fail);stroke:#df2020}.arrow-fail{fill:#df2020}.unit.retreat{filter:drop-shadow(1px 0 1px hsl(35,100%,50%)) drop-shadow(-1px 0 1px hsl(35,100%,50%)) drop-shadow(0 1px 1px hsl(35,100%,50%)) drop-shadow(0 -1px 1px hsl(35,100%,50%))}.order.retreat{stroke:#df8f20;marker-end:url(#arrow-retreat)}.arrow-retreat{fill:#df8f20}text,[id^=sc-],.unit{pointer-events:none}
</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
